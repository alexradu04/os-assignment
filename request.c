/* 
 * Operating Systems (2INCO) Practical Assignment
 * Interprocess Communication
 *
 * Contains functions that are used by the clients
 *
 */

#include "request.h"

// Array of requests
const Request requests[] = {
    // {1, 26, 1}, {2, 5, 2}, {3, 10, 2}, {5, 13, 1}, {4, 3, 1}
    {1,  26, 1}, {2,  5,  2}, {3,  10, 2}, {4,  42, 1}, {5,  31, 2},
    {6,  12, 1}, {7,  19, 2}, {8,  7,  1}, {9,  50, 2}, {10, 3,  1},
    {11, 25, 2}, {12, 8,  2}, {13, 14, 1}, {14, 44, 1}, {15, 27, 2},
    {16, 100,2}, {17, 45, 1}, {18, 6,  2}, {19, 9,  1}, {20, 33, 2},
    {21, 15, 1}, {22, 60, 2}, {23, 21, 1}, {24, 13, 2}, {25, 89, 1},
    {26, 55, 2}, {27, 77, 1}, {28, 29, 2}, {29, 38, 1}, {30, 20, 2}
    // {31, 47, 1}, {32, 16, 2}, {33, 81, 1}, {34, 34, 2}, {35, 23, 1},
    // {36, 75, 2}, {37, 99, 1}, {38, 11, 2}, {39, 62, 1}, {40, 58, 2},
    // {41, 30, 1}, {42, 46, 2}, {43, 54, 1}, {44, 40, 2}, {45, 72, 1},
    // {46, 17, 2}, {47, 83, 1}, {48, 51, 2}, {49, 97, 1}, {50, 22, 2},
    // {51, 63, 1}, {52, 90, 2}, {53, 32, 1}, {54, 24, 2}, {55, 67, 1},
    // {56, 37, 2}, {57, 79, 1}, {58, 41, 2}, {59, 28, 1}, {60, 85, 2},
    // {61, 49, 1}, {62, 73, 2}, {63, 92, 1}, {64, 35, 2}, {65, 56, 1},
    // {66, 98, 2}, {67, 70, 1}, {68, 82, 2}, {69, 64, 1}, {70, 88, 2},
    // {71, 53, 1}, {72, 36, 2}, {73, 94, 1}, {74, 48, 2}, {75, 86, 1},
    // {76, 57, 2}, {77, 71, 1}, {78, 59, 2}, {79, 74, 1}, {80, 93, 2},
    // {81, 65, 1}, {82, 84, 2}, {83, 39, 1}, {84, 95, 2}, {85, 66, 1},
    // {86, 87, 2}, {87, 61, 1}, {88, 96, 2}, {89, 78, 1}, {90, 43, 2},
    // {91, 80, 1}, {92, 68, 2}, {93, 52, 1}, {94, 76, 2}, {95, 91, 1},
    // {96, 69, 2}, {97, 88, 1}, {98, 14, 2}, {99, 99, 1}, {100, 45, 2}
};


// Places the information of the next request in the parameters sent by reference.
// Returns NO_REQ if there is no request to make.
// Returns NO_ERR otherwise.
int getNextRequest(int* jobID, int* data, int* serviceID) {
	static int i = 0;
	static int N_REQUESTS = sizeof(requests) / sizeof(Request);
	if (i >= N_REQUESTS) 
		return NO_REQ;

	*jobID = requests[i].job;
	*data = requests[i].data;
	*serviceID = requests[i].service;		
	++i;
	return NO_ERR;
}
